{"version":3,"sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts","./src/app/home/home.page.scss","./src/app/home/home.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAChB;AAEvC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,gDAAQ;KACpB;CACF,CAAC;IAMW,qBAAqB,SAArB,qBAAqB;CAAG;AAAxB,qBAAqB;IAJjC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACfO;AACM;AACF;AACA;AACN;AAEuB;AACN;IAa3C,cAAc,SAAd,cAAc;CAAG;AAAjB,cAAc;IAV1B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,uEAAqB;YACrB,kEAAgB;SACjB;QACD,YAAY,EAAE,CAAC,gDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACpBe;AACwB;AACpB;IASjC,QAAQ,SAAR,QAAQ;IAWjB,YACW,SAA0B,EAC1B,eAAgC,EAChC,IAAU;QAFV,cAAS,GAAT,SAAS,CAAiB;QAC1B,oBAAe,GAAf,eAAe,CAAiB;QAChC,SAAI,GAAJ,IAAI,CAAM;QAZrB,aAAQ,GAAG,kDAAkD,CAAC;QAC9D,gBAAW,GAAG,EAAE,CAAC;QACjB,mBAAc,GAAG,KAAK,CAAC;QACvB,WAAM,GAAG,iBAAiB,CAAC;QAC3B,UAAK,GAAG,CAAC,CAAC;QACV,aAAQ,GAAG,KAAK,CAAC;QACjB,YAAO,GAAG,KAAK,CAAC;QAChB,SAAI,GAAG,EAAE,CAAC;QAON,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,CAAC;aACnC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;YACf,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YACjC,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;gBACpB,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC5B,IAAI,CAAC,IAAI,EAAE,CAAC;gBACZ,IAAI,CAAC,MAAM,EAAE,CAAC;gBACd,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;aACzB;QACL,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;YACX,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,IAAI;QACM,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACxE,CAAC;IAED,MAAM;QACI,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,EAAE;YAC7D,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;IACP,CAAC;IAED,YAAY;QACR,sEAAsE;QAChE,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAO,IAAI,EAAE,EAAE,CAAC;YACtE,2EAA2E;YAC3E,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1C,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;gBACtB,IAAI,CAAC,MAAM,GAAG,kBAAkB,CAAC;gBACjC,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC;aACxC;QAEL,CAAC,EAAC,CAAC;QAEH,gBAAgB;QACV,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACnD,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YAChC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,yBAAyB;QACnB,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE,EAAE;YAC3D,IAAI,CAAC,WAAW,CAAC,+BAA+B,CAAC,CAAC;YAClD,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,yBAAyB;QACnB,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC,IAAI,EAAE,EAAE;YAC9D,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;YAC/B,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;YACtB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC1B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,CAAC;IAC5C,CAAC;IAED,gBAAgB;QACZ,IAAI,IAAI,CAAC,QAAQ,EAAE;YACT,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,CAAC;YAC1D,IAAI,CAAC,MAAM,GAAG,iBAAiB,CAAC;YAChC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;IACL,CAAC;IAED,gBAAgB;QACN,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,CAAC;QAC1D,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;QAChC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED,IAAI;QACA,IAAI,MAAM,GAAG,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;QAClC,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;IAC1E,CAAC;IAED,UAAU;QACA,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,UAAU,EAAE,CAAC;QACpD,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED,OAAO;QACH,IAAI,CAAC,cAAc,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC;QAC3C,IAAI,IAAI,CAAC,cAAc,EAAE;YACf,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;SAC3D;aAAM;YACG,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;SAC5D;IACL,CAAC;IAED,IAAI;QACM,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;IACtD,CAAC;IAED,MAAM;QACI,MAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,UAAU,EAAE,CAAC;IACxD,CAAC;IAEK,WAAW,CAAC,OAAO;;YACrB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACtC,qBAAqB;gBACrB,OAAO;gBACP,QAAQ,EAAE,QAAQ;gBAClB,QAAQ,EAAE,IAAI;aACjB,CAAC,CAAC;YAEH,KAAK,CAAC,OAAO,EAAE,CAAC;QAEpB,CAAC;KAAA;CACJ;;YAlJyB,2DAAe;YAAhC,2DAAe;YACf,wDAAI;;AASA,QAAQ;IALpB,wDAAS,CAAC;QACP,QAAQ,EAAE,UAAU;QACpB,yEAA6B;;KAEhC,CAAC;GACW,QAAQ,CAwIpB;AAxIoB;;;;;;;;;;;;;;;;ACXrB,iEAAe,aAAa,uBAAuB,uBAAuB,YAAY,aAAa,aAAa,gCAAgC,GAAG,uBAAuB,oBAAoB,sBAAsB,GAAG,kBAAkB,oBAAoB,sBAAsB,mBAAmB,cAAc,GAAG,kBAAkB,0BAA0B,GAAG,6CAA6C,+1BAA+1B,E;;;;;;;;;;;;;;;ACAlvC,iEAAe,kOAAkO,cAAc,iHAAiH,+DAA+D,QAAQ,ibAAib,gCAAgC,iJAAiJ,E","file":"src_app_home_home_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\nimport { FlexLayoutModule } from '@angular/flex-layout';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule,\n    FlexLayoutModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","import { Component } from '@angular/core';\nimport { AlertController, ToastController } from '@ionic/angular';\nimport { HTTP } from '@ionic-native/http/ngx';\n\ndeclare var window: any;\n\n@Component({\n    selector: 'app-home',\n    templateUrl: 'home.page.html',\n    styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n    tokenUrl = 'https://quickstart-4650-dev.twil.io/access-token';\n    accessToken = '';\n    speakerEnabled = false;\n    status = 'Initializing...';\n    timer = 0;\n    incoming = false;\n    calling = false;\n    from = '';\n\n    constructor(\n        public toastCtrl: ToastController,\n        public alertController: AlertController,\n        public http: HTTP,\n    ) {\n        this.http.get(this.tokenUrl, {}, {})\n        .then((res: any) => {\n            console.log(JSON.stringify(res));\n            if (res.status === 200) {\n                this.accessToken = res.data;\n                this.init();\n                this.isInit();\n                this.setupHandler();\n                this.status = 'Ready';\n            }\n        }).catch(err => {\n            console.log(JSON.stringify(err));\n        });\n    }\n\n    init() {\n        (<any>window).Twilio.TwilioVoiceClient.initialize(this.accessToken);\n    }\n\n    isInit() {\n        (<any>window).Twilio.TwilioVoiceClient.clientinitialized((res) => {\n            console.log('init', JSON.stringify(res));\n            this.showMessage('Ready to recieve calls');\n        });\n    }\n\n    setupHandler() {\n        // Accept or reject a call - only needed on Android - iOS uses CallKit\n        (<any>window).Twilio.TwilioVoiceClient.callinvitereceived(async (call) => {\n            // var confirmed = confirm('Accept incoming call from ' + call.from + '?');\n            console.log('call', JSON.stringify(call));\n            if (call) {\n                this.incoming = true;\n                this.from = call.from;\n                this.status = 'Incoming call...';\n                this.showMessage('Incoming call...');\n            }\n\n        });\n\n        // Handle Errors\n        (<any>window).Twilio.TwilioVoiceClient.error((error) => {\n            this.showMessage(error.message);\n            console.log('error', JSON.stringify(error));\n        });\n\n        // Handle Call Connection\n        (<any>window).Twilio.TwilioVoiceClient.calldidconnect((call) => {\n            this.showMessage(\"Successfully established call\");\n            console.log('connect', JSON.stringify(call));\n        });\n\n        // Handle Call Disconnect\n        (<any>window).Twilio.TwilioVoiceClient.calldiddisconnect((call) => {\n            this.showMessage(\"Call ended\");\n            console.log('disconnect', JSON.stringify(call));\n            this.status = 'Ready';\n            this.calling = false;\n            this.incoming = false;\n        });\n\n        this.showMessage(\"Handler established\");\n    }\n\n    acceptCallInvite() {\n        if (this.incoming) {\n            (<any>window).Twilio.TwilioVoiceClient.acceptCallInvite();\n            this.status = 'Call ongoing...';\n            this.calling = true;\n        }\n    }\n\n    rejectCallInvite() {\n        (<any>window).Twilio.TwilioVoiceClient.rejectCallInvite();\n        this.status = 'Ready';\n        this.showMessage('Reject call');\n        this.calling = false;\n        this.incoming = false;\n    }\n\n    dial() {\n        var params = { \"to\": '+6282242382604' };\n        (<any>window).Twilio.TwilioVoiceClient.call(this.accessToken, params);\n    }\n\n    disconnect() {\n        (<any>window).Twilio.TwilioVoiceClient.disconnect();\n        this.status = 'Ready';\n        this.calling = false;\n        this.incoming = false;\n    }\n\n    speaker() {\n        this.speakerEnabled = !this.speakerEnabled;\n        if (this.speakerEnabled) {\n            (<any>window).Twilio.TwilioVoiceClient.setSpeaker('on');\n        } else {\n            (<any>window).Twilio.TwilioVoiceClient.setSpeaker('off');\n        }\n    }\n\n    mute() {\n        (<any>window).Twilio.TwilioVoiceClient.muteCall();\n    }\n\n    unmute() {\n        (<any>window).Twilio.TwilioVoiceClient.unmuteCall();\n    }\n\n    async showMessage(message) {\n        const toast = await this.toastCtrl.create({\n            //   header: message,\n            message,\n            position: 'bottom',\n            duration: 3000\n        });\n\n        toast.present();\n\n    }\n}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFFQSxrQkFBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsUUFBQTtFQUNBLDJCQUFBO0FBQUY7O0FBR0E7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7QUFBRjs7QUFHQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtFQUVBLGNBQUE7RUFFQSxTQUFBO0FBRkY7O0FBS0E7RUFDRSxxQkFBQTtBQUZGIiwiZmlsZSI6ImhvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcblxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xufVxuXG4jY29udGFpbmVyIHN0cm9uZyB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XG59XG5cbiNjb250YWluZXIgcCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDIycHg7XG5cbiAgY29sb3I6ICM4YzhjOGM7XG5cbiAgbWFyZ2luOiAwO1xufVxuXG4jY29udGFpbmVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59Il19 */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Twilio Receive Incoming calls\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <div style=\\\"width: 100%; height: 100%;\\\" fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center center\\\" fxLayoutGap=\\\"8px\\\">\\n      <ion-img style=\\\"width: 300px;\\\" src=\\\"assets/support.jpg\\\"></ion-img>\\n      <div>Status: {{status}}</div>\\n      <div *ngIf=\\\"!calling\\\" fxLayout=\\\"row wrap\\\" fxLayoutGap=\\\"8px\\\">\\n          <ion-button color=\\\"success\\\" (click)=\\\"acceptCallInvite()\\\">Receive</ion-button>\\n          <ion-button color=\\\"danger\\\" (click)=\\\"rejectCallInvite()\\\">Reject</ion-button>\\n      </div>\\n      <div *ngIf=\\\"calling\\\" fxLayout=\\\"row wrap\\\" fxLayoutGap=\\\"8px\\\">          \\n        <ion-button color=\\\"success\\\" (click)=\\\"speaker()\\\">Speaker {{ speakerEnabled ? 'ON' : 'OFF'}}</ion-button>\\n        <ion-button color=\\\"danger\\\" (click)=\\\"disconnect()\\\">Close Call</ion-button>\\n      </div>\\n  </div>  \\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}